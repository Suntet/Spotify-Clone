<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <title>Spotify</title>
</head>
<body>

    <div class="sidebar">
        <div class="logo">
            <a href="#">
                <img src="./images/groove-music.png" alt="logos">
            </a>
        </div>
        <div class="navigation">
            <ul>
                <li>
                    <a href="#">
                        <span class="fa fa-home"></span>
                        <span>Home</span>
                    </a>
                </li>

                <li>
                    <a href="#">
                        <span class="fa fa-search"></span>
                        <span>Search</span>
                    </a>
                </li>

                <li>
                    <a href="#">
                        <span class="fa fas fa-book"></span>
                        <span>Library</span>
                    </a>
                </li>

            </ul>
        </div>
        <div class="navigation">
            <ul>
                <li>
                    <a href="#">
                        <span class="fa fas fa-plus-square"></span>
                        <span>Create Playlist</span>
                    </a>
                </li>

                <li>
                    <a href="#">
                        <span class="fa fas fa-heart"></span>
                        <span>Search</span>
                    </a>
                </li>

            </ul>
        </div>
        <div class="policies">
            <ul>
                <li>
                    <a href="#">Cookies</a>
                </li>
                <li>
                    <a href="#">Privacy</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="main-container">
        <div class="topbar">
            <div class="prev-next-button">
                <button type="button" class="fa fas fa-chevron-left"></button>
                <button type="button" class="fa fas fa-chevron-right"></button>
            </div>
            <div class="navbar">
                <ul>
                    <li>
                        <a href="#">Premium</a>
                    </li>
                    <li>
                        <a href="#">Support</a>
                    </li>
                    <li>
                        <a href="#">Download</a>
                    </li>
                    <li class="divider">|</li>
                    <li>
                        <a href="#">Sign Up</a>
                    </li>
                </ul>
                <button type="button">Log In</button>
            </div>
        </div>
    

    <div class="spotify-playlists">
        <h2>Spotify playlists</h2>
        <div class="list">
            <div class="item">
                <img src="./images/bookofuandi.jpg" />
                <audio id="audio">
                    <source src="./audio/7__ - Lovers(MP3_320K).mp3" type="audio/mpeg">
                </audio>)
                <div class="play">
                    <button type="button" id="" class="fa fa-play" onclick="mulai()" ></button>
                    <!-- <button type="button" class="fa fa-pause" onclick="jeda()"></button> -->
                </div>
                <h4>Today's Top Hits</h4>
                <p>Alec Benjamin Are On top of the...</p>
            </div>
            <div class="item">
                <img src="./images/BTTOTW.jpg" />
                <audio id="audio1">
                    <source src="./audio/ツユ - 奴隷じゃないなら何ですか_ MV(MP3_320K).mp3" type="audio/mpeg">
                </audio>
                <div class="play">
                    <i class="fa fa-play" onclick="mulai1()"></i>
                </div>
                <h4>Tuyu</h4>
                <p>New Song From Tuyu...</p>
            </div>
            <div class="item">
                <img src="./images/ca.jpg" />
                <div class="play">
                    <span class="fa fa-play"></span>
                </div>
                <h4>Chase Atlantic</h4>
                <p>The Newest Album From Chase Atlantic...</p>
            </div>
            <div class="item">
                <img src="./images/bookofuandi.jpg" />
                <div class="play">
                    <span class="fa fa-play"></span>
                </div>
                <h4>Today's Top Hits</h4>
                <p>Alec Benjamin Are On top of the...</p>
            </div>
            <div class="item">
                <img src="./images/bookofuandi.jpg" />
                <div class="play">
                    <span class="fa fa-play"></span>
                </div>
                <h4>Today's Top Hits</h4>
                <p>Alec Benjamin Are On top of the...</p>
            </div>
            <div class="item">
                <img src="./images/bookofuandi.jpg" />
                <div class="play">
                    <span class="fa fa-play"></span>
                </div>
                <h4>Today's Top Hits</h4>
                <p>Alec Benjamin Are On top of the...</p>
            </div>
            <div class="item">
                <img src="./images/bookofuandi.jpg" />
                <div class="play">
                    <span class="fa fa-play"></span>
                </div>
                <h4>Today's Top Hits</h4>
                <p>Alec Benjamin Are On top of the...</p>
            </div>
            <div class="item">
                <img src="./images/bookofuandi.jpg" />
                <div class="play">
                    <span class="fa fa-play"></span>
                </div>
                <h4>Today's Top Hits</h4>
                <p>Alec Benjamin Are On top of the...</p>
            </div>
        </div>
        <!-- <audio id="test">
            <source src="./audio/Nuts - Lil Peep (feat. Lil Skil) (slowed   lyrics)(MP3_320K).mp3" type="audio/mpeg">
        </audio> -->
    </div>

    <div class="slider-container">
        <i id="disk" class="fa fa-compact-disc"></i>
        <div class="divider">|</div>
        <div class="prev">
            <i id="prev"class="fa fa-backward-fast" onclick="prevTrack()"></i>
        </div>
        <dv class="play-btn">
            <i id="play"class="fa fa-play" onclick="mulai()"></i>
        </dv>
        <div class="forwd-btn">
            <i id="forw"class="fa fa-forward-fast" onclick="nextTrack()"></i>
        </div>
        <div class="current-time">
            00:00
        </div>
        <input type="range" min="1" max="100" value="0" class="seek-slider" onchange="seekTo()">
        <div class="total-duration">00:00</div>
    </div>

    <!-- <div class="preview">
        <div class="text">
            <h6>Preview of Spotify</h6>
            <p>Sign Up To get unlimited songs and Podcast with occasional ads, no credit card needed</p>
        </div>
        <div class="button">
            <button type="button">Sign Up</button>
        </div>
        <!-- <div class="text">
            <h6>Preview of Spotify</h6>
            <p>Sign Up To get unlimited songs and Podcast with occasional ads, no credit card needed</p>
        </div>
        <div class="button">
            <button type="button">Sign Up</button>
        </div> -->
    </div> -->
    <script src="https://kit.fontawesome.com/23cecef777.js" crossorigin="anonymous"></script>
    <script>

        function test(){
            console.log('bisa nih');
        }
        // var x = document.getElementById("audio");
        // var y = document.getElementById("audio1");


        // function mulai() {
        //     // console.log('tekan');
        //     // x.play()
        //     if (x.paused) {
        //         x.play();
        //     } else {
        //         x.pause();
        //     }
           
        // }

        // function mulai1() {
        //     // console.log('tekan');
        //     // x.play()
        //     if (y.paused) {
        //         y.play();
        //         button
        //     } else {
        //         y.pause();
        //     }
           
        // }
            
            let next_btn = document.querySelector(".forwd-btn");
            let prev_btn = document.querySelector(".prev");
            let seek_slider = document.querySelector(".seek-slider");
            let curr_time = document.querySelector(".current-time");
            let total_duration = document.querySelector(".total-duration");
            let track_index = 0; //current song
            let isPlaying = false; //kondisi player
            let updatetimer;

            let curr_track = document.createElement('audio'); //generator audio tag + currentt song

            let track_list = [ //list songs
                {
                    Name:"bus-tuyu",
                    path:"./audio/[MV] [TUYU] Anoyo-iki no basu ni notte saraba. Ucap Pisahku sambil menaiki Bus ke Akhirat(MP3_320K).mp3"
                },
                {
                    Name:"Lovers",
                    path:"./audio/7__ - Lovers(MP3_320K).mp3"
                },
                {
                    Name:"505",
                    path:"./audio/Arctic Monkeys - 505 - Lyrics(MP3_320K).mp3"
                }
            ];

            // loadTrack(track_list[track_index]);

            // function loadTrack(track_list){
            //     audio.src = `music/${track_list}.mp3`
            // }


                //reset seek slider + current dan total duration
            function resetValue(){
                curr_time.textContent = "00:00"
                total_duration.textContent = "00:00";
                seek_slider.value = 0;
            }
            //Load New Song di Dalam List menurut Index
            function loadTrack(track_index){
                clearInterval(updatetimer);
                resetValue();

                curr_track.src=track_list[track_index].path;
                curr_track.load();

                updatetimer = setInterval(seekUpdate(), 1000);
                curr_track.src = track_list[track_index].path

                curr_track.addEventListener("ended",function nextTrack(){
                    track_index++;
                    console.log('lagi update lagu');
                    if (track_index > track_list.length){
                        curr_track.src = track_list[track_index].path;
                        // loadTrack(track_list[track_index])
                        return;
                    }
                    // track_index = 0;//
                    curr_track.src = track_list[track_index].path;
                    //     track_index += 1;
                    // else track_index =
                     0;

                    // loadTrack(track_list[track_index]);
                    playTrack();
                    console.log('udah update');
                });
            }
            //Next Song Ketika curr track abis
            curr_track.addEventListener("ended",function nextTrack(){
                    track_index++;
                    console.log('lagi update lagu');
                    if (track_index > track_list.length){
                        curr_track.src = track_list[track_index].path;
                        // loadTrack(track_list[track_index])
                        return;
                    }
                    // track_index = 0;//
                    curr_track.src = track_list[track_index].path;
                    //     track_index += 1;
                    // else track_index =
                     0;

                    // loadTrack(track_list[track_index]);
                    playTrack();
                    console.log('udah update');
                });

            // curr_track.src=track_list[track_index].path;
            // curr_track.load();

            // // updatetimer = setInterval(seekUpdate, 1000);
            
            curr_track.src = track_list[track_index].path//detec song list

            function mulai(){
                if (!isPlaying) playTrack();
                else pauseTrack();
            }

            function playTrack(){
                curr_track.play();
                isPlaying = true;
                console.log('asoy');

            }

            function pauseTrack(){
                curr_track.pause();
                isPlaying = false;
                console.log('tidak asoy');
            }

            function nextTrack(){
                    track_index++;
                    console.log('lagi update lagu');
                    if (track_index > track_list.length){
                        curr_track.src = track_list[track_index].path;
                        // loadTrack(track_list[track_index])
                        return;
                    }
                    // track_index = 0;//
                    curr_track.src = track_list[track_index].path;
                    //     track_index += 1;
                    // else track_index = 0;

                    // loadTrack(track_list[track_index]);
                    playTrack();
                    console.log('udah update');
                }


            function prevTrack(){
                    track_index--;
                    console.log('lagi update lagu');
                    if (track_index > track_list.length){
                        curr_track.src = track_list[track_index].path;
                        // loadTrack(track_list[track_index])
                        return;
                    }
                    // track_index = 0;//
                    curr_track.src = track_list[track_index].path;
                    //     track_index += 1;
                    // else track_index = 0;

                    // loadTrack(track_list[track_index]);
                    playTrack();
                    console.log('udah update');
                }

            function seekTo(){
                console.log('jalan')
                seekto = curr_track.duration * (seek_slider.value / 100);
                curr_track.currentTime = seekto;
            }

            loadTrack[track_index]; // jangan di otak atik

            curr_track.ontimeupdate = function seekUpdate(){
                let seekPosition = 0;
                
                if (!isNaN(curr_track.duration)){
                    seekPosition = curr_track.currentTime * (100 / curr_track.duration);
                    seek_slider.value = seekPosition;
                    console.log('kalkulasI dulu boss');
                    let currentminutes = Math.floor(curr_track.currentTime / 60);
                    let currentseconds = Math.floor(curr_track.currentTime - currentminutes * 60);
                    let durationminutes = Math.floor(curr_track.duration / 60);
                    let durationseconds = Math.floor(curr_track.duration - durationminutes * 60);

                    if (currentseconds < 10){ currentseconds= "0" + currentseconds;};
                    if (durationseconds < 10) {durationseconds= "0" + durationseconds;};
                    if (currentminutes < 10){currentminutes= "0" + currentminutes;};
                    if (durationminutes < 10){durationminutes = "0" + durationminutes;};
  
                    curr_time.textContent = currentminutes+":"+currentseconds;
                    total_duration.innerHTML = durationminutes+":"+durationseconds;
                }   
            };

            curr_track.onplay = function seekTo(){
                console.log('jalan');
                seekto = curr_track.duration * (seek_slider.value / 100);
                curr_track.currentTime = seekto;
                console.log('udah jalan');
            };
        
    </script>
</body>
</html>
